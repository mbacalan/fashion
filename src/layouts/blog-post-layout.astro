---
import BlogLayout from "./blog-layout.astro";

const {
  title = "Maison Atelier — Journal Entry",
  heroTag = "Field Notes",
  heroTitle,
  heroDescription,
  heroAccent,
  pubDate,
  readTime,
  author = "Maison Atelier Team",
  tags = [],
} = Astro.props as {
  title?: string;
  heroTag?: string;
  heroTitle?: string;
  heroDescription?: string;
  heroAccent?: string;
  pubDate?: string | Date;
  readTime?: string;
  author?: string;
  tags?: string[];
};

const published =
  typeof pubDate === "string"
    ? new Date(pubDate)
    : pubDate
      ? new Date(pubDate)
      : undefined;

const formattedDate = published?.toLocaleDateString("en-US", {
  month: "long",
  day: "numeric",
  year: "numeric",
});

const accentParts = [author && `By ${author}`, formattedDate, readTime].filter(
  Boolean,
) as string[];

const accent =
  heroAccent ?? (accentParts.length ? accentParts.join(" • ") : undefined);
---

<BlogLayout
  title={title}
  heroTag={heroTag}
  heroTitle={heroTitle ?? title}
  heroDescription={heroDescription ?? ""}
  heroAccent={accent}
>
  <article
    class="border-brand-secondary-border space-y-10 rounded-3xl border bg-white px-8 py-10 shadow-[0_18px_38px_rgba(31,42,36,0.12)]"
  >
    {
      tags.length ? (
        <ul class="text-brand-secondary-ink flex flex-wrap gap-2 text-[0.7rem] font-medium tracking-[0.26em] uppercase">
          {tags.map((tag) => (
            <li class="bg-brand-secondary-soft text-brand-secondary rounded-full px-4 py-1">
              {tag}
            </li>
          ))}
        </ul>
      ) : null
    }
    <div
      class="blog-content text-brand-body space-y-6 text-base leading-relaxed"
    >
      <slot />
    </div>
  </article>
</BlogLayout>

<style>
  .blog-content :global(h1) {
    font-size: 2rem;
    line-height: 1.2;
    color: var(--color-brand-ink);
    margin: 0;
  }

  .blog-content :global(h2) {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--color-brand-ink-strong);
    margin: 2rem 0 0.75rem;
  }

  .blog-content :global(p) {
    margin: 1rem 0 0;
  }

  .blog-content :global(ul),
  .blog-content :global(ol) {
    margin: 1rem 0 0;
    padding-left: 1.5rem;
  }

  .blog-content :global(li) {
    margin-top: 0.5rem;
  }

  .blog-content :global(strong) {
    color: var(--color-brand-ink);
    font-weight: 600;
  }

  .blog-content :global(em) {
    color: var(--color-brand-ink-muted);
  }

  .blog-content :global(blockquote) {
    margin: 2rem 0;
    padding: 1.5rem;
    border-left: 4px solid var(--color-brand-primary);
    background: rgba(47, 111, 85, 0.12);
    color: var(--color-brand-ink-muted);
  }

  .blog-content :global(code) {
    font-family:
      "Source Code Pro", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
      "Liberation Mono", "Courier New", monospace;
    font-size: 0.95em;
    background: rgba(47, 111, 85, 0.1);
    padding: 0.125rem 0.375rem;
    border-radius: 0.375rem;
  }
</style>
